# CRUD using Redis with FastAPI

In this basic project I get started with Redis (using Docker) and FastAPI, with a CRUD operations

## 1. Setup Redis on Docker

For demo purposes I use the Redis Image from docker hub.

[bitnami/redis](https://hub.docker.com/r/bitnami/redis/)

Can change the environment variables in docker-compose.yaml.

To start redis cluster execute
```
docker compose up
```

See containers ids
```
docker ps
```

To use redis-cli execute next command (replace CONTAINER_ID_MASTER with yours)
```
docker exec -it CONTAINER_ID_MASTER /bin/bash
```

Next login in redis-cli with password used for master in docker-compose file
```
redis-cli -a "master_password"
```

**_NOTE:_** We can use INFO command for test the connection

![redis-cli-info](https://github.com/pwsandoval/crud-redis-fastapi/blob/main/images/redis-cli-info.png?raw=true)

## 2. Setup FastAPI

I use poetry for package dependency management, if you have installed can init new project fastly with following
```
poetry init -n
```

Next install the packages with
```
poetry install
```

**_NOTE:_** I also added a requeriments.txt file for venv or conda users

To start the uvicorn server and run the application execute in root folder
```
poetry run uvicorn main:app --reload
```

![fastapi-run](https://github.com/pwsandoval/crud-redis-fastapi/blob/main/images/fastapi-run.png?raw=true)

Open in any browser http://127.0.0.1:8000/docs for test the endpoints

![fastapi-docs](https://github.com/pwsandoval/crud-redis-fastapi/blob/main/images/fastapi-docs.png?raw=true)

Can create new product with the UI

![fastapi-new](https://github.com/pwsandoval/crud-redis-fastapi/blob/main/images/fastapi-new.png?raw=true)
![fastapi-new-response](https://github.com/pwsandoval/crud-redis-fastapi/blob/main/images/fastapi-new-response.png?raw=true)

And the get all endpoint return all data

![fastapi-getall](https://github.com/pwsandoval/crud-redis-fastapi/blob/main/images/fastapi-getall.png?raw=true)

**_NOTE:_** Must update the connection.py file in redis-crud/db folder with your master port generated by docker

![docker-master-port](https://github.com/pwsandoval/crud-redis-fastapi/blob/main/images/docker-master-port.png?raw=true)

### TODO:

- [ ] Use env vars in app
- [ ] Add the update endpoint
